<emp-ng-card [title]="request.procedureType"
             [hint]="request.requestedBy.name"
             (cardClose)="onClose()">

  <mat-horizontal-stepper linear #stepper labelPosition="bottom" color="accent">


    <mat-step completed="true">
      <ng-template matStepLabel>Datos del solicitante</ng-template>
      <emp-one-requester-data
        [requester]="request.requestedBy"
        [procedureType]="request.procedureType"
        (editRequester)="onRequesterDataChanged($event)">
      </emp-one-requester-data>
    </mat-step>

    <mat-step [completed]="request?.form?.fields">
      <ng-template matStepLabel>{{signed ? 'Ver' : 'Llenar'}}<br>el formulario</ng-template>
      <ng-container *ngIf="request.procedureType === 'AvisoPreventivo'">
        <emp-land-preventive-note
            [request]="request"
            (editionEvent)="processEvent($event)">
        </emp-land-preventive-note>
      </ng-container>
      <ng-container *ngIf="request.procedureType === 'SegundoAvisoDefinitivo'">
        <emp-land-definitive-note></emp-land-definitive-note>
      </ng-container>
      <ng-container *ngIf="request.procedureType === 'InscripcionEscrituraPublica'">
        <emp-land-deed></emp-land-deed>
      </ng-container>
      <ng-container *ngIf="request.procedureType === 'SolicitudFolioReal'">
        <emp-land-folio-real-request></emp-land-folio-real-request>
      </ng-container>
      <div class="right">
        <button class="btn-action" matStepperNext>Siguiente</button>
      </div>
    </mat-step>

    <mat-step [completed]="true" *ngIf="request.procedureType === 'InscripcionEscrituraPublica'">
      <ng-template matStepLabel>Adjuntar<br>archivos</ng-template>
      <emp-ng-file-control></emp-ng-file-control>

      <div class="right">
        <button mat-button matStepperPrevious>Anterior</button>
        <button class="btn-action" matStepperNext>Siguiente</button>
      </div>
    </mat-step>

    <mat-step [completed]="signed">
      <ng-template matStepLabel>{{signed ? 'Firma electr칩nica' : 'Firmar la solicitud'}}</ng-template>

      <emp-one-request-signer
          [request]="request"
          [readonly] = "submitted"
          (editionEvent)="processEvent($event)">
      </emp-one-request-signer>

      <div class="right">
        <button mat-button matStepperPrevious>Anterior</button>
        <button [class.btn]="!signed" [class.btn-action]="signed"
                [disabled]="!signed" matStepperNext>Siguiente</button>
      </div>
    </mat-step>

    <mat-step [completed]="submitted">
      <ng-template matStepLabel>{{submitted ? 'Informaci칩n del tr치mite' : 'Solicitar el tr치mite'}}</ng-template>

      <emp-one-request-submitter
          [request]="request"
          (editionEvent)="processEvent($event)">
      </emp-one-request-submitter>
    </mat-step>

  </mat-horizontal-stepper>
</emp-ng-card>
